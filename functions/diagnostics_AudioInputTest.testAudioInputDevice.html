<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>testAudioInputDevice | @packages/meet API Documentation - v0.0.1</title><meta name="description" content="Documentation for @packages/meet API Documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">@packages/meet API Documentation - v0.0.1</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="../modules/diagnostics_AudioInputTest.html">diagnostics/AudioInputTest</a></li><li><a href="" aria-current="page">testAudioInputDevice</a></li></ul><h1>Function testAudioInputDevice</h1></div><section class="tsd-panel"><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="testaudioinputdevice"><span class="tsd-kind-call-signature">testAudioInputDevice</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/diagnostics_AudioInputTest.Options.html" class="tsd-signature-type tsd-kind-interface">Options</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a href="../classes/diagnostics_AudioInputTest.AudioInputTest.html" class="tsd-signature-type tsd-kind-class">AudioInputTest</a><a href="#testaudioinputdevice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>[[AudioInputTest]] tests audio input capabilities. It serves to help diagnose
potential audio device issues that would prevent audio from being recognized
in a WebRTC call.</p>
<hr>
<p>The [[AudioInputTest]] class is an <code>EventEmitter</code> (please see [[AudioInputTest.on]] for
events and their details) and helps to diagnose issues by capturing user
audio and emitting the volume levels detected in that media.</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-5">AudioInputTest</span><span class="hl-2">, </span><span class="hl-5">testAudioInputDevice</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&#39;@twilio/rtc-diagnostics&#39;</span><span class="hl-2">;</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">options</span><span class="hl-2">: </span><span class="hl-9">AudioInputTest</span><span class="hl-2">.</span><span class="hl-9">Options</span><span class="hl-2"> = { ... };</span><br/><span class="hl-0">// `options` may be left `undefined` to use default option values</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">audioInputTest</span><span class="hl-2">: </span><span class="hl-9">AudioInputTest</span><span class="hl-2"> = </span><span class="hl-1">testAudioInputDevice</span><span class="hl-2">(</span><span class="hl-5">options</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<p>Applications can use the volume events emitted by the test to update their UI
to show to the user whether their media was captured successfully.</p>
<pre><code class="ts"><span class="hl-5">audioInputTest</span><span class="hl-2">.</span><span class="hl-1">on</span><span class="hl-2">(</span><span class="hl-5">AudioInputTest</span><span class="hl-2">.</span><span class="hl-5">Events</span><span class="hl-2">.</span><span class="hl-5">Volume</span><span class="hl-2">, (</span><span class="hl-5">volume</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2">) </span><span class="hl-6">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">ui</span><span class="hl-2">.</span><span class="hl-1">updateVolume</span><span class="hl-2">(</span><span class="hl-5">volume</span><span class="hl-2">); </span><span class="hl-0">// Update your UI with the volume value here.</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

<p>The test can be normally stopped two ways: allowing the test to time out and
stopping the test manually.</p>
<p>To end the test manually, the application can ask the end-user to confirm
that the volume levels it emits are what the end-user expects. If so, the
application can call the [[AudioInputTest.stop]] method with <code>true</code>. Otherwise,
if the audio values are not expected, the application can call
[[AudioInputTest.stop]] with <code>false</code>.</p>
<pre><code class="ts"><span class="hl-0">// The UI should indicate that if the volume values are what the user</span><br/><span class="hl-0">// expects, they can click this button to pass and stop the test...</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">volumeCorrectButton</span><span class="hl-2"> = ...;</span><br/><span class="hl-5">volumeCorrectButton</span><span class="hl-2">.</span><span class="hl-1">addEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;click&#39;</span><span class="hl-2">, () </span><span class="hl-6">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">audioInputTest</span><span class="hl-2">.</span><span class="hl-1">stop</span><span class="hl-2">(</span><span class="hl-6">true</span><span class="hl-2">);</span><br/><span class="hl-2">});</span><br/><br/><span class="hl-0">// ...otherwise, if the volume levels are not what they expect, they can</span><br/><span class="hl-0">// click this.</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">volumeIncorrectButton</span><span class="hl-2"> = ...;</span><br/><span class="hl-5">volumeIncorrectButton</span><span class="hl-2">.</span><span class="hl-1">addEventListener</span><span class="hl-2">(</span><span class="hl-3">&#39;click&#39;</span><span class="hl-2">, () </span><span class="hl-6">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">audioInputTest</span><span class="hl-2">.</span><span class="hl-1">stop</span><span class="hl-2">(</span><span class="hl-6">false</span><span class="hl-2">);</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

<p>Calling [[AudioInputTest.stop]] will immediately end the test.</p>
<hr>
<p>The [[AudioInputTest]] object will always emit a [[AudioInputTest.Report]] with the
[[AudioInputTest.Events.End]] event, regardless of the occurrence of errors during
the runtime of the test.</p>
<p>Fatal errors will immediately end the test and emit a report such that the
value of [[AudioInputTest.Report.errors]] will contain the fatal error.</p>
<p>Non-fatal errors will not end the test, but will be included in the value of
[[AudioInputTest.Report.errors]] upon completion of the test.</p>
<hr>
<p>Note: In Firefox, <code>deviceId</code> will be ignored, and instead the user will get a
browser pop-up where they can select the device they want to use. This is
unavoidable as it is Firefox's implementation of <code>getUserMedia()</code>.</p>
<p>In most browsers, such as Chrome and Safari, when <code>getUserMedia()</code> is called,
a prompt will ask the user for broad microphone-access permissions. Then, the
parameters passed to <code>getUserMedia()</code> will determine the device that is
captured.</p>
<p>Firefox differs in that the prompt will ask for a specific input device.
Regardless of the parameters passed to <code>getUserMedia()</code>, the device
selected in that prompt will be captured. If the user opts to have the
browser, &quot;Remember this selection&quot; within the prompt, the device that was
selected will be captured by every future <code>getUserMedia()</code> call as well.
This selection will persist even through changes in the system OS, i.e. when
default devices are changed. To change the device, the user has to
revoke the webpage's microphone-access permissions for the prompt to show
again.</p>
<p>Please see this link for more information on microphone access in Firefox:
<a href="https://support.mozilla.org/en-US/kb/how-manage-your-camera-and-microphone-permissions">https://support.mozilla.org/en-US/kb/how-manage-your-camera-and-microphone-permissions</a></p>
<hr>
<p>The function [[testAudioInputDevice]] serves as a factory function that accepts
[[AudioInputTest.Options]] as its only parameter and will instantiate an
[[AudioInputTest]] object with those options.</p>
<pre><code class="ts"><span class="hl-4">import</span><span class="hl-2"> { </span><span class="hl-5">AudioInputTest</span><span class="hl-2">, </span><span class="hl-5">testAudioInputDevice</span><span class="hl-2"> } </span><span class="hl-4">from</span><span class="hl-2"> </span><span class="hl-3">&#39;@twilio/rtc-diagnostics&#39;</span><span class="hl-2">;</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">options</span><span class="hl-2">: </span><span class="hl-9">AudioInputTest</span><span class="hl-2">.</span><span class="hl-9">Options</span><span class="hl-2"> = { ... };</span><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-7">audioInputTest</span><span class="hl-2">: </span><span class="hl-9">AudioInputTest</span><span class="hl-2"> = </span><span class="hl-1">testAudioInputDevice</span><span class="hl-2">(</span><span class="hl-5">options</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/diagnostics_AudioInputTest.Options.html" class="tsd-signature-type tsd-kind-interface">Options</a></span><div class="tsd-comment tsd-typography"><p>Options to pass to the [[AudioInputTest]] constructor.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="../classes/diagnostics_AudioInputTest.AudioInputTest.html" class="tsd-signature-type tsd-kind-class">AudioInputTest</a></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/talview/webclients/blob/a0630253b79532d5c09872564cb87f4195d43d7d/packages/meet/lib/diagnostics/AudioInputTest.ts#L692">packages/meet/lib/diagnostics/AudioInputTest.ts:692</a></li></ul></aside></div></li></ul></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">@packages/meet API Documentation - v0.0.1</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
